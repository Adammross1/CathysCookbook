<!-- 
    Authors: Section 2, Group 1 (Michael Hutchings, Jared Rosenlund, Adam Ross, and Ryan Ward)
    Description: This is the view to create a new user. When the new user is created, they are automatically
    logged in and rerouted to the landing page.
 -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="This is a platform providing a systematic way to study and implement the characteristics of Jesus Christ into one's own self.">

  <!-- Open Graph -->
  <meta property="og:title" content="Meal Planning Tool">
  <meta property="og:site_name" content="Easy Meal Planner">
  <meta property="og:url" content="">
  <meta property="og:description"
    content="Create and save favorite recipes, and generate a shopping list and meal plan for the week.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="images/Cathy's (blk).svg">
  <meta property="og:image:alt" content="">
  <meta property="og:image:width" content="1200px">
  <meta property="og:image:height" content="630px">

  <!-- Title -->
  <title>Cathy's Cookbook</title>

  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="images/Cathy's (blk).svg">
  <link rel="icon" type="image/png" sizes="32x32" href="images/Cathy's (blk).svg">
  <link rel="icon" type="image/png" sizes="16x16" href="images/Cathy's (blk).svg">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="/styles/main.css">

  <!-- JavaScript -->
  <script src="JS.js" defer></script>
</head>

<body class="bg-image">

  <nav class="navbar">
    <!-- <div class="logo">
      <img class="logo-img" src="/images/Cathy's (blk).svg" alt="Logo">
    </div> -->
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/about">About</a>
      <a href="/search">My Recipes</a>
      <a href="/searchapi">Online Recipes</a>
      <a href="/addRecipe">Add Recipe</a>
      <a href="/myLists">My Lists</a>
      <a href="/manageAccount">Account</a>

      <!-- EJS FOR LOGIN / LOGOUT LINK FUNCTIONALITY -->

      <% if (user) { %>
        <% console.log("This is the log with try on the index page if there is a user :", user) %>
          <% var name="Log Out" ; %>
            <% var path="/logout" ; %>
              <% } else { %>
                <% console.log("This is the log with catch on the index page if there is no user.") %>
                  <% var name="Log In" ; %>
                    <% var path="/login" ; %>
                      <% } %>

                        <a href="<%= path %>">
                          <%= name %>
                        </a>

    </div>
  </nav>

  <div class="space"></div>

  <div class="login-logo">
    <img src="../images/Cathy's (blk).svg" width="300px" height="300px">
  </div>

  <br><br><br>
  <h1>Create an Account</h1>
  <div class="grey-line"></div>

  <div class="space"></div>

  <main>
    <form method="post" action="/newUser" class="user-form">
      <!-- Returns error message and clears form if the user already exists -->
      <% if (errorMessage) {%>
        <script>
          document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("username").value = "";
            document.getElementById("password").value = "";
            document.getElementById("username").focus();
          })


        </script>

        <% } %>

          <!-- Form to create new user -->
          <div class="form">
            <p class="error" id="errorMessage">
              <%= errorMessage %>
            </p>
            <div class="user-container">
              <label for="username">Username:</label>
              <input type="text" id="username" name="username" required autofocus>
              <br><br>
              <label for="password">Password:</label>
              <input type="text" id="password" name="password" required>
              <br><br>
              <label for="fname">First Name:</label>
              <input type="text" id="fname" name="fname" required>
              <br><br>
              <label for="lname">Last Name:</label>
              <input type="text" id="lname" name="lname" required>
              <br><br>
              <label for="email">Email:</label>
              <input type="text" id="email" name="email" required>
              <br><br>
            </div>
          </div>
          <div class="space"></div>
          <div class="button-container">
            <button type="submit" class="button">SUBMIT</button>
          </div>
    </form>
  </main>

  <div class="space"></div>
  <div class="space"></div>

  <footer>
    <p>Cathy's Cookbook Â© 2023</p>
  </footer>

</body>

</html>